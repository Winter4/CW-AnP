#pragma once
#include <iostream>

// структура массива
struct MyArray { 
	float* items; // элементы
	int number; // кол-во элементов
};

// сформировать массив (parent)
void FormArray(MyArray* array);

// ввести массив с клавиатуры (child 1)
void EnterArrayByKeyboard(MyArray array);
// зарандомить массив (child 2)
void RandomArray(MyArray array);
// считать массив из файла (child 3)
void GetArrayFromFile(MyArray array);

// флотовый рандом
float FloatRandom(float leftBorder, float rightBorder);

// ___________________________________________________________

void FormArray(MyArray* array)
{
	// ввод кол-ва элементов
	printf(" Enter the number of array items: ");
	scanf("%d", &array->number);

	array->items = new float[array->number];

	printf("\nChoose the method of array forming \n 1 - Enter by keyboard \n 2 - Random \n 3 - Get from the file");
	printf("\n Your choice: ");
	int choice;
	scanf_s("%d", &choice);

	switch (choice) {
	case 1:
		EnterArrayByKeyboard(*array);
		break;
	case 2:
		RandomArray(*array);
		break;
	case 3:
		GetArrayFromFile(*array);
	}
}

void EnterArrayByKeyboard(MyArray array)
{
	printf("\n");
	for (int i = 0; i < array.number; i++) {
		printf(" Item %d: ", i + 1);
		scanf_s("%f", &array.items[i]);
	}
}

void RandomArray(MyArray array)
{
	printf("\nThe array: \n");
	for (int i = 0; i < array.number; i++) {
		// (b - a) * rand() / RAND_MAX + a
		array.items[i] = FloatRandom(-2 * array.number, 2 * array.number);
		printf("Item %d: %.1f \n", i + 1, array.items[i]);
	}
}

void GetArrayFromFile(MyArray array)
{
	FILE* file;
	char fileName[12];
	do {
		printf("Enter the file name: "); // ввод имени файла
		gets_s(fileName);

		file = fopen(fileName, "r");
	} while (file == NULL);

	int i = 0;
	while (i < array.number && !(feof(file))) { // считывание из файла
		fscanf(file, "%f", &array.items[i]);
		i++;
	}
	fclose(file);

	for (i; i < array.number; i++) // дозаполнение рандомом
		array.items[i] = FloatRandom(-2 * array.number, 2 * array.number);

	printf("\nThe array: \n"); // вывод в консоль
	for (int i = 0; i < array.number; i++)
		printf("Item %d: %.1f \n", i + 1, array.items[i]);
}

float FloatRandom(float leftBorder, float rightBorder)
{
	return (rightBorder - leftBorder) * rand() / RAND_MAX + leftBorder;
}